<!DOCTYPE html>

<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="skin.main_template.macros.master">  
      lang="de">

  <tal:block tal:replace="nothing">
    This file is part of the business logic for
    
      Jugendkongress
    
    Copyright 2014–24 by Diedrich Vorberg (diedrich@tux4web.de)
    Copyricht 2014–24 Jugendwerk der SELK (jugendwerk@selk.de)
    
    All Rights Reserved
  </tal:block>

  <head>
    <tal:block metal:fill-slot="head_slot">
      <tal:block tal:condition="congress.registration_is_open">
        <script>
          const controller_url = '${congress.controller_url}';
        </script>
        <script src="/skin/jugendkongress/booking.js"></script>
      </tal:block>
    </tal:block>
  </head>

  <body>
    <metal:block metal:fill-slot="congress-menu"
                 tal:define="in_archive python:False">

      <span class="navbar-text" tal:condition="in_archive">
        <a class="nav-link" href="/archive.cgi">
          <i class="icon icon-white icon-arrow-left"></i>
          Zurück zum Archiv
        </a> |
      </span>
      
      <ul class="navbar-nav">
      </ul>
      
      <ul class="navbar-nav ms-2"
          tal:condition="congress.registration_is_open and not booking">
        <li class="nav-item">
          <button type="button" class="btn btn-primary"
                  data-bs-toggle="modal"
                  data-bs-target="#anmelden-dialog">
            Anmelden
          </button>
        </li>
      </ul>
      
      <div class="navbar-text ms-auto" tal:condition="not:in_archive">
        <a class="nav-link" href="/archive.cgi" tal:replace="nothing">
          <strong>Archiv </strong>
        </a>
      </div>
    </metal:block>

    <metal:block metal:fill-slot="main">
      <div class="booking-welcome text-success mt-4" tal:condition="booking">
        <h3>
          Willkommgen
          ${booking.firstname}
          ${booking.lastname}!
        </h3>
        
        <p>
          <a href="#booking">Hier</a>
          findest du die Details zu deiner Anmeldung.
        </p>
      </div>
      
      <div class="mt-4 congress" tal:content="structure congress.html" />

      <button type="button" class="btn btn-link p-0" 
              data-bs-toggle="modal"
              data-bs-target="#anmelden-dialog"
              tal:condition="congress.registration_is_open and not booking">
        Anmelden
      </button>

      <div class="modal" tabindex="-1" id="anmelden-dialog"
           tal:condition="congress.registration_is_open and not booking">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Anmeldung</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal"
                      aria-label="Schließen"></button>
            </div>
            <div class="modal-body">
              <form class="needs-validation">
                <div class="mb-3">
                  <label for="email"
                         class="form-label">e-Mail Adresse</label>
                  <input type="email" class="form-control"
                         id="email" aria-describedby="email-help" />
                  <div id="email-help" class="form-text">
                    Mit einer e-Mail Adresse kann sich genau eine Person
                    anmelden.
                  </div>
                  <div class="invalid-feedback" data-for="email">
                  </div>
                  <div id="resend-email" class="form-text" style="display:none">
                    Möchtest du deine Anmelde-e-Mail noch einmal erhalten?
                    <button class="btn btn-sm btn-success"
                            type="button">
                      Senden
                    </button>
                  </div>
                </div>
                <div class="mb-3">
                  <label for="firstname" class="form-label">Vorname</label>
                  <input type="text" class="form-control"
                         id="firstname" aria-describedby="firstname-help" />
                  <div id="firstname-help" class="form-text">
                  </div>                  
                  <div class="invalid-feedback" data-for="firstname">
                  </div>
                </div>
                <div class="mb-3">
                  <label for="lastname" class="form-label">Nachname</label>
                  <input type="text" class="form-control"
                         id="lastname" aria-describedby="lastname-help" />
                  <div id="lastname-help" class="form-text">
                  </div>
                  <div class="invalid-feedback">
                  </div>                  
                  <div class="invalid-feedback" data-for="firstname">
                  </div>
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary"
                      data-bs-dismiss="modal">Abbruch</button>
              <button type="button" id="anmelde-button"
                      class="btn btn-primary disabled">Anmelden</button>
            </div>
          </div>
        </div>
      </div>

      <div class="modal" tabindex="-1" id="angemeldet-dialog"
           tal:condition="congress.registration_is_open">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="exampleModalLabel">
                Du bist angemeldet!
              </h1>
              <button type="button" class="btn-close"
                      data-bs-dismiss="modal" aria-label="Schließen"></button>
            </div>
            <div class="modal-body">
              Schau in deinem e-Mail Postfach nach. Du bekommst
              gleich eine e-Mail, mit der du deine Angaben vervollständigen
              und eine Vorauswahl der Workshops treffen kannst. 
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary"
                      data-bs-dismiss="modal">Schlißen</button>
            </div>
          </div>
        </div>
      </div>        
    </metal:block>
  </body>
</html>
